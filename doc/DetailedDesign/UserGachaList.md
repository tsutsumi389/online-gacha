# ユーザー用 ガチャ一覧画面 詳細設計

## 1. 画面概要
- 全ユーザーが利用可能な公開ガチャの一覧を閲覧できる画面
- 各ガチャの詳細画面やガチャ実行画面への遷移が可能
- リアルタイムAPI統合によるデータ表示

## 2. 主な機能
- 公開ガチャ一覧表示（カード形式）
- 検索・絞り込み（ガチャ名、作成者名）
- カテゴリ別フィルタリング
- ソート機能（人気順、評価順、価格順、新着順）
- お気に入り機能
- ガチャ詳細ボタン
- ガチャを引くボタン
- レスポンシブデザイン対応

## 3. UI/UX特徴
- Material-UI + Framer Motionによるモダンデザイン
- 画像スライダー（Swiper.js）
- レアリティ表示
- 在庫状況プログレスバー
- 評価・レビュー表示
- 残り時間表示
- アニメーション効果

## 4. 表示データ項目
- **ガチャ名**: gachas.name
- **説明**: gachas.description
- **価格**: gachas.price
- **作成者**: users.name（作成者情報）
- **評価**: 集計データ（rating）
- **プレイ数**: 集計データ（totalPlays）
- **画像**: 複数画像対応
- **レアリティ構成**: gacha_items.rarity
- **在庫状況**: gacha_items.stock
- **公開期間**: gachas.display_from ～ gachas.display_to
- **詳細ボタン**: ガチャ詳細画面へ遷移
- **引くボタン**: ガチャ実行画面へ遷移

## 5. API設計
- **GET /api/gachas** ... 公開ガチャ一覧取得（検索・絞り込み対応）
  - クエリパラメータ：
    - search: 検索キーワード（ガチャ名、作成者名）
    - category: カテゴリフィルタ
    - sortBy: ソート項目（name, price, created_at）
    - sortOrder: ソート順（asc, desc）
    - page, limit: ページネーション

- **GET /api/gachas/:id** ... ガチャ詳細取得（アイテム情報含む）

## 6. バリデーション・UX
- ローディング状態の表示
- エラーハンドリング（APIエラー、ネットワークエラー）
- 空データ時の適切なメッセージ
- 画像未設定時のフォールバック表示
- レスポンシブ対応（スマホ・タブレット・PC）
- アクセシビリティ配慮（ARIA属性、キーボード操作）

## 7. 権限制御
- 全ユーザーが一覧閲覧可能（認証不要）
- 「ガチャを引く」ボタンは認証必須
- 公開されたガチャのみ表示（is_public = true）
- 公開期間内のガチャのみ表示

## 8. 技術仕様
- **フロントエンド**: React 18 + Material-UI v5
- **状態管理**: React Hooks（useState, useEffect）
- **API通信**: Fetch API with utils/api.js
- **アニメーション**: Framer Motion
- **画像表示**: Swiper.js
- **レスポンシブ**: Material-UI Grid System

## 9. エラーハンドリング
- ネットワークエラー時の再試行機能
- APIエラー時のユーザーフレンドリーなメッセージ
- データ欠損時の適切なフォールバック表示
- 画像読み込みエラー時の代替表示

## 10. パフォーマンス考慮
- 画像遅延読み込み
- 仮想スクロール（大量データ対応）
- APIレスポンスキャッシュ
- 検索デバウンス処理
- メモ化によるレンダリング最適化

## 11. 今後の拡張予定
- 無限スクロール対応
- より詳細なフィルタリング（価格帯、レアリティ）
- ソーシャル機能（シェア、コメント）
- パーソナライズド推奨機能
- 多言語対応

---
