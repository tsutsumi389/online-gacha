# ガチャ管理画面 詳細設計

## 1. 画面概要
- ガチャの新規作成・編集・削除・アイテム管理を行うための管理画面
- ガチャごとにアイテムリストや在庫数などを管理
- すべてのユーザーが自分のガチャを管理可能

## 2. 画面構成

### 2.1 ガチャ一覧画面（AdminGachaManage）
- ガチャ一覧表示（ページネーション対応）
  - ガチャ名、説明、価格、公開状態、作成日時
  - 公開/非公開の切り替えスイッチ
- 新規ガチャ作成ボタン
- 各ガチャの編集・削除ボタン
- 検索・フィルタ機能（将来対応）

### 2.2 ガチャ編集/新規作成画面（AdminGachaEdit）
- 基本情報入力
  - ガチャ名（必須、最大128文字）
  - 説明文（最大1000文字）
  - 価格（必須、1以上の整数）
  - 公開/非公開切替
  - 表示期間（開始日・終了日、任意）
- アイテム管理セクション（ガチャ作成後に表示）
  - アイテム一覧テーブル
  - アイテム名、在庫数、公開状態、画像
  - アイテムの追加・編集・削除機能
- 保存/キャンセルボタン
- 一覧に戻るボタン

### 2.3 アイテム編集ダイアログ
- アイテム名（必須、最大128文字）
- 説明（最大1000文字）
- 在庫数（0以上の整数）
- 画像URL（任意）
- 公開/非公開切替
- 保存/キャンセルボタン

### 2.4 削除確認ダイアログ
- ガチャ削除時の確認メッセージ
- 削除/キャンセルボタン
- アイテム削除時の確認メッセージ

## 3. 画面遷移イメージ
- ガチャ管理一覧 → [新規作成] → ガチャ編集画面 → 成功メッセージ表示 → アイテム管理可能
- ガチャ管理一覧 → [編集] → ガチャ編集画面（アイテム管理含む）
- ガチャ管理一覧 → [削除] → 削除確認ダイアログ
- ガチャ編集画面 → [アイテム追加] → アイテム編集ダイアログ
- アイテム一覧 → [編集] → アイテム編集ダイアログ
- アイテム一覧 → [削除] → 削除確認ダイアログ

## 4. バリデーション・UX
- 必須項目未入力時は保存不可
- ガチャ名: 1-128文字、必須
- 説明: 0-1000文字
- 価格: 1以上の整数、必須
- アイテム名: 1-128文字、必須
- 在庫数: 0以上の整数
- 画像URL: 有効なURL形式
- 新規ガチャ作成成功時は成功メッセージ表示
- アイテム管理セクションは動的に表示
- エラー時は詳細なエラーメッセージを表示

## 5. API設計
- GET /api/my/gachas ... ユーザーのガチャ一覧取得（ページネーション対応）
- POST /api/my/gachas ... ガチャ新規作成
- PUT /api/my/gachas/:id ... ガチャ編集
- DELETE /api/my/gachas/:id ... ガチャ削除
- PATCH /api/my/gachas/:id/public ... 公開状態切り替え
- GET /api/my/gachas/:id/items ... アイテム一覧取得
- POST /api/my/gachas/:id/items ... アイテム追加
- PUT /api/my/gachas/:gachaId/items/:itemId ... アイテム編集
- DELETE /api/my/gachas/:gachaId/items/:itemId ... アイテム削除

## 6. 技術仕様
- フロントエンド: React 18 + Material-UI + Framer Motion
- バックエンド: Node.js + Fastify + JWT認証
- データベース: PostgreSQL
- バリデーション: Joi（バックエンド）
- 認証: JWT + HTTPOnly Cookie
- エラーハンドリング: 統一されたエラーレスポンス形式

## 7. 備考
- レスポンシブデザイン対応（スマホ・PC）
- 認証必須（ログインユーザーのみアクセス可）
- ユーザーは自分が作成したガチャのみ管理可能
- Material-UIコンポーネントを使用したモダンなUI
- リアルタイムでの状態更新（公開/非公開切り替え等）
